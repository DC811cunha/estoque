<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title><%= titulo %></title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    rel="stylesheet">
</head>
<body class="text-center">

  <div class="container mt-4">
    <!-- Flash messages (apenas um único bloco) -->
    <% if (success_msg && success_msg.length) { %>
      <% success_msg.forEach(msg => { %>
        <div class="alert alert-success text-left"><%= msg %></div>
      <% }) %>
    <% } %>
    <% if (error_msg && error_msg.length) { %>
      <% error_msg.forEach(msg => { %>
        <div class="alert alert-danger text-left"><%= msg %></div>
      <% }) %>
    <% } %>

    <h1 class="card text-white bg-primary">
      <div class="card-body">
        <p class="card-text"><%= titulo %></p>
        <h4 class="card-text">Clientes já cadastrados no sistema</h4>
      </div>
    </h1>

    <div class="mt-3">
      <a class="btn btn-primary" href="/novoCliente">Novo</a>
      <a class="btn btn-secondary" href="/principal">Voltar</a>
    </div>

    <table class="table table-striped table-hover mt-4">
      <thead class="bg-light">
        <tr>
          <th style="width: 15%;">Nome</th>
          <th style="width: 45%;">E-mail</th>
          <th style="width: 15%;">Telefone</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody>
        <% if (!registros || registros.length === 0) { %>
          <tr>
            <td colspan="4" class="text-center">Nenhum cliente cadastrado</td>
          </tr>
        <% } else { %>
          <% registros.forEach(function(cliente) { %>
            <tr>
              <td><%= cliente.nome_cliente %></td>
              <td><%= cliente.email_cliente %></td>
              <td><%= cliente.telefone_cliente %></td>
              <td>
                <a href="/alterarCliente/<%= cliente.id_cliente %>" class="btn btn-warning btn-sm">Alterar</a>
                <a href="/excluirCliente/<%= cliente.id_cliente %>"
                   class="btn btn-danger btn-sm"
                   onclick="return confirm('Deseja excluir este cliente?');">
                  Excluir
                </a>
              </td>
            </tr>
          <% }) %>
        <% } %>
      </tbody>
    </table>
  </div>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</body>
</html>
